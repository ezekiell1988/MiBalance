<div class="container-fluid">
  <!-- Resumen Financiero -->
  <div class="row">
    <div class="col-xl-3 col-md-6">
      <panel [title]="'Ingresos del Mes'" [variant]="'success'" [noButton]="true">
        <div class="text-center py-4">
          <div class="f-s-24 f-w-600 text-success">
            {{ resumenFinanciero.ingresos | currency:'CRC':'symbol-narrow':'1.0-0' }}
          </div>
          <div class="text-muted f-s-12 mt-2">Total de ingresos</div>
        </div>
      </panel>
    </div>

    <div class="col-xl-3 col-md-6">
      <panel [title]="'Gastos del Mes'" [variant]="'danger'" [noButton]="true">
        <div class="text-center py-4">
          <div class="f-s-24 f-w-600 text-danger">
            {{ resumenFinanciero.gastos | currency:'CRC':'symbol-narrow':'1.0-0' }}
          </div>
          <div class="text-muted f-s-12 mt-2">Total de gastos</div>
        </div>
      </panel>
    </div>

    <div class="col-xl-3 col-md-6">
      <panel [title]="'Balance'" [variant]="'primary'" [noButton]="true">
        <div class="text-center py-4">
          <div class="f-s-24 f-w-600" [ngClass]="balanceClass">
            {{ resumenFinanciero.balance | currency:'CRC':'symbol-narrow':'1.0-0' }}
          </div>
          <div class="text-muted f-s-12 mt-2">Ingresos - Gastos</div>
        </div>
      </panel>
    </div>

    <div class="col-xl-3 col-md-6">
      <panel [title]="'Saldo Tarjetas'" [variant]="'warning'" [noButton]="true">
        <div class="text-center py-4">
          <div class="f-s-24 f-w-600 text-warning">
            {{ resumenFinanciero.saldoTarjetas | currency:'CRC':'symbol-narrow':'1.0-0' }}
          </div>
          <div class="text-muted f-s-12 mt-2">Deuda total</div>
        </div>
      </panel>
    </div>
  </div>

  <!-- Gráficos y Detalles -->
  <div class="row">
    <!-- Gastos por Categoría -->
    <div class="col-xl-6">
      <panel [title]="'Gastos por Categoría'">
        <div class="table-responsive">
          <table class="table table-hover table-valign-middle mb-0">
            <thead>
              <tr>
                <th>Categoría</th>
                <th class="text-end">Monto</th>
                <th class="text-end">%</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let cat of categoriasGastos">
                <td>{{ cat.categoria }}</td>
                <td class="text-end">{{ cat.monto | currency:'CRC':'symbol-narrow':'1.0-0' }}</td>
                <td class="text-end">
                  <span class="badge bg-primary">{{ cat.porcentaje | number:'1.1-1' }}%</span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </panel>
    </div>

    <!-- Transacciones Recientes -->
    <div class="col-xl-6">
      <panel [title]="'Transacciones Recientes'">
        <div class="table-responsive">
          <table class="table table-hover table-valign-middle mb-0">
            <thead>
              <tr>
                <th>Descripción</th>
                <th>Categoría</th>
                <th class="text-end">Monto</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let trans of transaccionesRecientes">
                <td>
                  <div class="d-flex align-items-center">
                    <i class="fa fa-circle f-s-8 me-2" 
                       [ngClass]="trans.monto > 0 ? 'text-success' : 'text-danger'"></i>
                    {{ trans.descripcion }}
                  </div>
                </td>
                <td>
                  <span class="badge bg-secondary">{{ trans.categoria }}</span>
                </td>
                <td class="text-end f-w-600" 
                    [ngClass]="trans.monto > 0 ? 'text-success' : 'text-danger'">
                  {{ trans.monto | currency:'CRC':'symbol-narrow':'1.0-0' }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <div class="text-center mt-3">
          <a routerLink="/transacciones" class="btn btn-outline-primary btn-sm">
            Ver Todas las Transacciones
          </a>
        </div>
      </panel>
    </div>
  </div>

  <!-- Accesos Rápidos -->
  <div class="row">
    <div class="col-12">
      <panel [title]="'Accesos Rápidos'" [noButton]="true">
        <div class="d-flex justify-content-around p-3">
          <a routerLink="/transacciones" class="text-center text-decoration-none">
            <div class="btn btn-primary btn-lg rounded-circle mb-2" style="width: 60px; height: 60px;">
              <i class="fa fa-exchange-alt fa-lg mt-2"></i>
            </div>
            <div class="text-muted f-s-12">Transacciones</div>
          </a>

          <a routerLink="/tarjetas" class="text-center text-decoration-none">
            <div class="btn btn-info btn-lg rounded-circle mb-2" style="width: 60px; height: 60px;">
              <i class="fa fa-credit-card fa-lg mt-2"></i>
            </div>
            <div class="text-muted f-s-12">Tarjetas</div>
          </a>

          <a routerLink="/categorias" class="text-center text-decoration-none">
            <div class="btn btn-success btn-lg rounded-circle mb-2" style="width: 60px; height: 60px;">
              <i class="fa fa-tags fa-lg mt-2"></i>
            </div>
            <div class="text-muted f-s-12">Categorías</div>
          </a>

          <a routerLink="/reportes" class="text-center text-decoration-none">
            <div class="btn btn-warning btn-lg rounded-circle mb-2" style="width: 60px; height: 60px;">
              <i class="fa fa-chart-bar fa-lg mt-2"></i>
            </div>
            <div class="text-muted f-s-12">Reportes</div>
          </a>
        </div>
      </panel>
    </div>
  </div>
</div>
